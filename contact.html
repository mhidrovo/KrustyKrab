<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">
        <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" 
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" 
        crossorigin="anonymous"></script>
        <style>
            .errMsg {
                color: #D20E11; border: solid 1px #d20e11; display:none;  
                padding: 1px 15px;
                }
            textarea {
                resize: none;
                width: 30%; 
                margin: 8px 0;
                padding: 2%;
                font-size: 16px;
                text-align: center;
                display: block;
                border-radius: 5px;
                border: #000 2px solid;
                font-family: Garamond;

            }
        </style>
    </head>
<body>
    <div id="navBar">
        <!-- logo -->
        <span id="logo">
            <a href="index.html"> <img src="KrustyKrabLogo.png" height="100%"></a>
        </span>

        <span id="pages">
            <!-- Menu -->
            <span class="navBox">
                <a href="menu.html"> Menu </a>
            </span>

            <!-- The Team -->
            <span class="navBox">
                <a href="team.html"> The Team </a>
            </span>

            <!-- Location -->
            <span class="navBox">
                <a href="location.html"> Location </a>
            </span>

            <!-- Events / Gallery -->
            <span class="navBox">
                <a href="gallery.html"> Gallery </a>
            </span>

            <!-- Contact Us -->
            <span class="navBox">
                <a href="contact.html"> Contact Us </a>
            </span>

            <!-- FAQ -->
            <span class="navBox">
                <a href="faq.html"> FAQ </a>
            </span>
    </div>
    <script>

        //TODO:
        //Upload select options making sure its a comment, resume, reservations, or other
        //Add options for date and time if it is reservation, and remove resume of its not job application
        // style the whole page. 
        //
        $("[type=file]").on("change", function(){
            // Name of file and placeholder
            var file = this.files[0].name;
            var dflt = $(this).attr("placeholder");
            if($(this).val()!=""){
                $(this).next().text(file);
            } else {
                $(this).next().text(dflt);
            }
        });


        function validateEmail(email) 
        {
            const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(String(email).toLowerCase());
        }
        function validPhoneNumber()
        {
                var enteredNumber = document.getElementsByName("phone")[0].value;
                var phonenumber = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
                if(phonenumber.test(enteredNumber)){
                    return true; 
                }
                return false;    
        }
        function validate()
        {
            err=false;
            document.getElementById("errFName").style.display = "none";
            document.getElementById("errPhone").style.display = "none";
            document.getElementById("errLName").style.display = "none";
            document.getElementById("errMail").style.display = "none";
            document.getElementById("errCard").style.display = "none";
            with (document.data)
            {
                if (lname.value=="")
                {
                    document.getElementById("errFName").style.display = "inline-block";
                    lname.focus();
                    err=true;
                }
                if (fname.value=="")
                {
                    document.getElementById("errLName").style.display = "inline-block";

                    phone.focus();
                    err=true;
                }
                if(email.value=="" || !(validateEmail(email.value))) 
                {
                    document.getElementById("errMail").style.display = "inline-block";
                    email.focus();
                    err=true;
                }
                if(phone.value==""|| !validPhoneNumber())
                {
                    document.getElementById("errPhone").style.display = "inline-block";
                    phone.focus();
                    err=true;
                }
                if(card.value == "" || !validCard(card.value))
                {
                    document.getElementById("errCard").style.display = "inline-block"
                    card.focus()
                    err = true
                }

            }
            
            return !err;
        }
        function validCard(inputtxt)
        {
            var cardno = /^(?:3[47][0-9]{13})$/;
            if(inputtxt.value.match(cardno))
                    {
                return true;
                    }
                else
                    {
                    // alert("Not a valid American Express credit card number!");
                    return false;
                    }
        }
        
        window.onload =  function() 
        {
            select_choices = document.getElementById("reason")
            // displayDonate()
            select_choices.addEventListener("change", function ()
            {
                displayAppropriateValue(select_choices.value)
                // alert("Hey")
            })
            
            // alert(select_choices)
            // alert("hey")
        }
        function displayAppropriateValue(choice)
        {
            if(choice == "donate")
            {
                
            }
            else if(choice == "employment")
            {

            }
            else if(choice == "other")
            {

            }
            else if(choice == "reservation")
            {
                //display calendar or something that checks for appropriate date. 
            }
            // alert(choice)
        }
        function displayDonate()
        {

        }

    </script>

<!-- <p>Click on the "Choose File" button to upload a file:</p> -->

<form 
    action="/action_page.php"
    name="data"
>

<p>First Name*: <input type="text"  name='fname' /></p>
<div id="errFName" class="errMsg" display = "none"> 
    First Name is required</div> 
<p>Last Name*:  <input type="text"  name='lname' /></p>
	<div id="errLName" class="errMsg" display = "none"> 
        Last Name is required</div> 
<p id= "phone">Phone*: <input type="text"  name='phone'/></p>
    <div id="errPhone" class="errMsg" display= "none"> 
        Valid phone number is required</div>
<p id= "card">American Express Credit Card: <input type="text"  name='card'/></p>
<div id="errCard" class="errMsg" display= "none"> 
    Valid credit card is required</div>
<p id= "email">Email*: <input type="text"  name='email'/></p>
    <div id="errMail" class="errMsg" display= "none"> 
        Valid email is required</div>
        <select name="reason" id="reason">
            <option value="donate" id ="abc">Donation</option>
            <option value="employment">Employment</option>
            <option value="reservation">Make a Reservation</option>
            <option value="other">Other</option>
        </select>
        <script>
            var	finalTax = document.getElementById("abc");
            finalTax = "123445";
        </script>
    

<textarea placeholder="Feel free to add any additional information here"></textarea>
  <input type="file" id="myFile">
  <label for="myFile">Upload resume</label>
  <input type = "button" value = "Submit" onclick="return validate()"/>
</form>

</body>
</html>
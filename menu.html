<!DOCTYPE html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Menu</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="NavBarStyle.css">
	<link rel="stylesheet" type="text/css" href="FooterStyle.css">
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" 
      integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" 
      crossorigin="anonymous">
    </script>
    <script>
    
	//Here is the array and object declarations for the menu/ordering
      function MenuItem(name, cost)
      {
        this.name = name;
        this.cost=cost;
      }

      menuItems = new Array(
        new MenuItem("Krabby Patty", 4),
        new MenuItem("Double Krabby Patty", 5),
        new MenuItem("Triple Krabby Patty", 6),
        new MenuItem("Kelp Rings", 2),
        new MenuItem("Coral Bits", 2),
        new MenuItem("Salty Sea Dog", 7),
        new MenuItem("Kelp Shake", 2),
        new MenuItem("Sailor Surprise", 5),
        new MenuItem("Fountain Drink", 2),
        new MenuItem("Krabby Patty Meal", 8),
        new MenuItem("Double Krabby Patty Meal", 9),
        new MenuItem("Triple Krabby Patty Meal", 10),
        new MenuItem("Pirate Gang's Surprise", 20),
        new MenuItem("Super Salty Sea Dog", 15),
        new MenuItem("Krusty Krab Pizza", 20)
      );

      function makeSelect(name, minRange, maxRange)
      {
        var t= "";
        t = "<select name='" + name + "' size='1'>";
        for (j=minRange; j<=maxRange; j++)
          t += "<option>" + j + "</option>";
        t+= "</select>"; 
        return t;
      }

    </script>    

<style type="text/css">

	@import url('https://fonts.googleapis.com/css2?family=Chango&display=swap');

	@font-face {
  		font-family: 'KrustyFont';
  		src: URL('MenuFont.ttf') format('truetype');
	}

	
	.menuList {
	  color: #000000;
	  font-size: 20px;
	  background: #88ceca; 
	  padding: 1px 15px;	
	}
	
	form {
	  background-color: rgb(216, 231, 150);
	  margin : 20px;
	}

	h2 .headers {
	  background-color: #4a43b1
	}

	.errMsg {
	  color: #D20E11; border: solid 1px #d20e11; display:none;  padding: 1px 15px;
	}

	p {
		padding: 0.5% 0%;
		text-align: left;
    	margin: 5%;
	}

	.main {
		margin-top: 0px;
		max-height: 100%;
		max-width: 100%;
	}

	.main .inside {
		margin: 0px;
		vertical-align: middle;
		max-height: 100%;
		max-width: 100%;
		background-color: rgb(216, 231, 150);
	}

	.food {
		column-count: 2;
	}

	.inside .row  {
		flex: 50%;
		padding: 2%;
		text-align: center;
	}

	#name_of_food {
		padding-top: 5%;
		font-weight: bold;
	}

	#food_descr {
		color: rgb(66, 66, 66);
	}

	h2 {
		text-align: center;
		background-color: rgb(216, 231, 150);
		margin-right: 300px;
		margin-left: 300px;
		color:#000000;
	}

	.button {
		background-color: #4CAF50;
		border: none;
		color: white;
		padding: 15px 32px;
		text-align: center;
		text-decoration: none;
		display: inline-block;
		font-size: 16px;
		margin: 4px 25%;
		cursor: pointer;
	}
	select {
		width: auto;
		height: 30px;
	}
	</style>

</head>

<body>
<div id="navBar">
	<!-- logo -->
	<span id="logo">
		<a href="index.html"> <img src="KrustyKrabLogo.png" height="100%"></a>
	</span>

	<span id="pages">
		<!-- Menu -->
		<span class="navBox">
			<a href="menu.html"> Menu </a>
		</span>

		<!-- The Team -->
		<span class="navBox">
			<a href="team.html"> The Team </a>
		</span>

		<!-- Location -->
		<span class="navBox">
			<a href="location.html"> Location </a>
		</span>

		<!-- Events / Gallery -->
		<span class="navBox">
			<a href="gallery.html"> Gallery </a>
		</span>

		<!-- Contact Us -->
		<span class="navBox">
			<a href="contact.html"> Contact Us </a>
		</span>

		<!-- FAQ -->
		<span class="navBox">
			<a href="faq.html"> FAQ </a>
		</span>
</div>



<h1>Krusty Krab Menu</h1>


	<!--Here is the main portion of the menu-->
	<div class= "main">
		<div class= "inside">
			<div style="text-align: center; font-size: 32px; 
			font-style: italic; font-family: Chango;">
			Signature Meals</div>
			<div class="food">
				<div class= "row">
					<div id="name_of_food">
						Krabby Patty Meal
					</div>
					<div id="food_descr">
						The quintessential Krabby Patty meal. Comes with a side and beverage. 
						Chef's recommendation! &nbsp $8
					</div>
					<div id="name_of_food">
						Double Krabby Patty Meal
					</div>
					<div id="food_descr">
						If you are moderatly hungry, the double Krabby Patty meal is it. Is a double-decker krabby patty
						that comes with a side and beverage.  &nbsp $9
					</div>
					<div id="name_of_food">
						Triple Krabby Patty Meal
					</div>
					<div id="food_descr">
						Meant only for those who are severely starved hungry. Is a triple-decker krabby patty 
						that comes with a side and beverage.  &nbsp $10
					</div>
				</div>
				<div class= "row">
					<div id="name_of_food">
						Pirate Gang's Surprise
					</div>
					<div id="food_descr">
						Born from sailors lost at sea, this beverage makes the sailor surprise 
						look like chum bucket sludge. Highest quality ingredients including extra 
						secret sauce and special neptune cream. Also served with a krabby patty and side. &nbsp $20    
					</div>
					<div id="name_of_food">
						Super Salty Sea Dog
					</div>
					<div id="food_descr">
						An XL salty sea dog with your choice of a side and drink. &nbsp $15
					</div>
					<div id="name_of_food">
						Krusty Krab Pizza
					</div>
					<div id="food_descr">
						An exquisite specialty, this pizza meal is one large cheese pizza 
						with your choice of sides and beverage.  &nbsp $20   
					</div>
				</div>
			</div> 
			<div style="text-align: center; font-size: 32px; 
                font-style: italic; font-family: Chango;">
                Individual Item</div>
                <div class="food">
                    <div class= "row">
                        <div id="name_of_food">
                            Krabby Patty
                        </div>
                        <div id="food_descr">
							Krabby Patty with cheese, lettuce, pickles, onion, tomato, 
							mustard, ketchup, and our secret ingredient &nbsp $4
                        </div>
                        <div id="name_of_food">
                            Double Krabby Patty
                        </div>
                        <div id="food_descr">
                            Double decker krabby patty. &nbsp $5
                        </div>
                        <div id="name_of_food">
                            Triple Krabby Patty
                        </div>
                        <div id="food_descr">
                            Triple decker krabby patty. &nbsp  $6
                        </div>
                    </div>
                    <div class="row">
                        <div id="name_of_food">
                            Salty Sea Dog
                        </div>
                        <div id="food_descr">
                            A premium salty dog served in our signature bun. Comes with 
							ketchup and mustard. &nbsp $7
                        </div>
                        <div id="name_of_food">
                            Kelp Shake
                        </div>
                        <div id="food_descr">
                            Signature Kelp shake made with fresh kelp. &nbsp $2
                        </div> 
                        <div id="name_of_food">
                            Fountain drink
                        </div>
                        <div id="food_descr">
                            Classic fountain drinks served without ice. &nbsp $2
                        </div> 
                        <div id="name_of_food">
                                Sailors Surprise
                        </div>
                        <div id="food_descr">
                            Recipe comes from sailors lost at sea from the kraken itself. 
							Contains essence of kraken, sailing juice, and other secret ingredients. &nbsp $5
                        </div>
                        <div id="name_of_food">
                            Coral Bits
                        </div>
                        <div id="food_descr">
                            Signature fried coral bits made from fresh coral.  &nbsp $2
                        </div>
                        <div id="name_of_food">
                            Kelp Rings
                        </div>
                        <div id="food_descr">
                            Signature fried kelp made from fresh kelp.  &nbsp $2
                        </div>
                    </div>
                 </div>
			</div>
		</div>









  <!--Here is the form/order area-->
  <h2>Order Now!</h2>

  <form style="text-align: center; display:inline-block; margin-left: 25%;">
    <p>First Name: <input type="text"  name='fname' size="2" /></p>
    <p>Last Name*:  <input type="text"  name='lname' /></p>
    <div id="errlname" class="errMsg">Name is required</div>
    
    <p id="street">Street: <input type="text"  name='street' /></p>
    <div id="errstreet" class="errMsg">Street is required</div>
    
    <p id="city">City: <input type="text"  name='city' /></p>
    <div id="errcity" class="errMsg">City is required</div>
    
    <p>Phone Number*: <input type="text"  name='phone' /></p>
    <div id="errphone" class="errMsg">Phone is required</div>
    
    <p> 
      <input type="radio"  name="p_or_d" value = "pickup" checked="checked"/>Pickup  
      <input type="radio"  name='p_or_d' value = 'delivery'/>
      Delivery
    </p>

    <table border="0" cellpadding="3">
      <tr>
        <th>Select Item</th>
        <th>Item Name</th>
        <th>Cost Each</th>
        <th>Total Cost</th>
      </tr>

    <script>
          var s = "";
          for (i=0; i< menuItems.length; i++)
          {
            s += "<tr><td>";
            s += makeSelect("quan" + i, 0, 10);
            s += "</td><td>" + menuItems[i].name + "</td>";
            s += "<td> $ " + menuItems[i].cost.toFixed(2) + "</td>";
            s += "<td><input type='text' name='cost'/></td></tr>";
          }
          document.writeln(s);
    </script>

	</table>

    <p>Subtotal: 
        $<input type="text"  name='subtotal' id="subtotal" />
    </p>
    <p>Bikini Bottom tax 10%:
       $ <input type="text"  name='tax' id="tax" />
    </p>
    <p>Total: $ <input type="text"  name='total' id="total" />
    </p>
    <input type="button" class="button" value="Submit Order" onclick="finish();"/>
     
    </form>

	</div>
    <script language="javascript">


  	var tax = 0;
	var	subtotal = 0;
	var	total = 0;
	var	massTax = 0.1;
	var	finalTax = document.getElementById("tax");
	var	finalSubtotal = document.getElementById("subtotal");
	var	finalTotal = document.getElementById("total");


	// dropdown quantities for menu items
	var krabbyPatty = document.getElementsByName("quan0");
	var doubleKrabbyPatty = document.getElementsByName("quan1");
	var tripleKrabbyPatty = document.getElementsByName("quan2");  
	var	kelpRings = document.getElementsByName("quan3");
  	var coralBits = document.getElementsByName("quan4");

	var	saltySeaDog = document.getElementsByName("quan5");
  	var kelpShake = document.getElementsByName("quan6");
	var sailorSurprise= document.getElementsByName("quan7");
	var fountainBev = document.getElementsByName("quan8");
	var krabbyPattyMeal = document.getElementsByName("quan9");

	var doubleKrabbyPattyMeal = document.getElementsByName("quan10");
	var tripleKrabbyPattyMeal = document.getElementsByName("quan11");  
	var pirateGangSurprise = document.getElementsByName("quan12");  
	var	superSaltySeaDog = document.getElementsByName("quan13");
	var krustyKrabPizza = document.getElementsByName("quan14");
	var	quanItem = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];


	// the values for the quantity * item and the boxes that display the values
	var finalItemSubtotal = document.getElementsByName("cost");
	var	itemSubtotals = [0, 0, 0, 0, 0];


	// validating street and city/pickup vs delivery
	var street = document.getElementById("street"); 
	var	city = document.getElementById("city");


	// make sure street and city are not displayed at the start
	var	method = "pickup";
	street.style.display = "none";
	city.style.display = "none";


	// the hour, minute, and string that will be display in the order message
	// needs to be declared up here
	var hour;
	var	min;



	// Will check if phone number is valid
	function validateNumber() {
		var enteredNumber = document.getElementsByName("phone")[0].value;
        var phonenumber = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
        if(phonenumber.test(enteredNumber)){
            return true; 
        }
		return false;    
	}

	// calculates time the order will be ready for pickup or delivery
	function getTime() {
		var timing = 0
		var date = new Date();

		min = date.getMinutes();
		hour = date.getHours();

		if (method == "delivery") {
 			timing = 30;
 		} else if (method == "pickup") {
 			timing = 15;
 		}

		min += timing;
		hour += Math.floor(min / 60);
		min = Math.round(min % 60);


		// checks if it goes over to next day
	 	var dayornight;
	 	if (hour > 23) {
	 		hour = hour-24;  
	 	} 

		// formats minute correctly
		if (min < 10) {
			min = '0' + min;
		}
	}


	// adds event listeners for the dropdown menu
	window.onload = function () {
		krabbyPatty[0].addEventListener("change", function() {
			updateQuantity(0, krabbyPatty[0].selectedIndex);
		});

		doubleKrabbyPatty[0].addEventListener("change", function() {
			updateQuantity(1, doubleKrabbyPatty[0].selectedIndex);
		});

		tripleKrabbyPatty[0].addEventListener("change", function() {
			updateQuantity(2, tripleKrabbyPatty[0].selectedIndex);
		});

		kelpRings[0].addEventListener("change", function() {
			updateQuantity(3, kelpRings[0].selectedIndex);
		});

    coralBits[0].addEventListener("change", function() {
			updateQuantity(4, coralBits[0].selectedIndex);
		});

		saltySeaDog[0].addEventListener("change", function() {
			updateQuantity(5, saltySeaDog[0].selectedIndex);
		});

    kelpShake[0].addEventListener("change", function() {
			updateQuantity(6, kelpShake[0].selectedIndex);
		});

    sailorSurprise[0].addEventListener("change", function() {
			updateQuantity(7, sailorSurprise[0].selectedIndex);
		});

		fountainBev[0].addEventListener("change", function() {
			updateQuantity(8, fountainBev[0].selectedIndex);
		});

		krabbyPattyMeal[0].addEventListener("change", function() {
			updateQuantity(9, krabbyPattyMeal[0].selectedIndex);
		});

		doubleKrabbyPattyMeal[0].addEventListener("change", function() {
			updateQuantity(10, doubleKrabbyPattyMeal[0].selectedIndex);
		});

		tripleKrabbyPattyMeal[0].addEventListener("change", function() {
			updateQuantity(11, tripleKrabbyPattyMeal[0].selectedIndex);
		});

    	pirateGangSurprise[0].addEventListener("change", function() {
			updateQuantity(12, pirateGangSurprise[0].selectedIndex);
		});

		superSaltySeaDog[0].addEventListener("change", function() {
			updateQuantity(13, superSaltySeaDog[0].selectedIndex);
		});
		krustyKrabPizza[0].addEventListener("change", function() {
			updateQuantity(14, krustyKrabPizza[0].selectedIndex);
		});



		document.getElementsByName("p_or_d")[0].addEventListener("change", function() {
				street.style.display = "none";
				city.style.display = "none";
				document.getElementById("errcity").style.display = "none";
				document.getElementById("errstreet").style.display = "none";
				method = "pickup";
		});


		document.getElementsByName("p_or_d")[1].addEventListener("change", function() {
				street.style.display = "block";
				city.style.display = "block";
				method = "delivery";
		});
	}


	// updates the quantity of an item to the given number, calls other updates
	function updateQuantity(i, quantity) {
		var subtract = 0;
		if(quanItem[i] > quantity) {
			subtract = quantity - quanItem[i];
		}
		quanItem[i] = quantity;
		updateTotals(i, subtract);
	}

	//updates and displays the subtotal per item
	function updateTotals(i, subtract) {

		var subfromtotal = 0;
		if(subtract != 0) {
			subfromtotal = subtract * (1 * menuItems[i].cost);
		}
		itemSubtotals[i] = quanItem[i] * menuItems[i].cost;
		finalItemSubtotal[i].value = itemSubtotals[i].toFixed(2);
		

		updateCosts(i, subtract, subfromtotal);
	} 

	//updates and displays the subtotal, tax, and total boxes
	function updateCosts(i, subtract, subfromtotal) {
			if (subfromtotal != 0) {
				subtotal += subfromtotal;
			} else {
				subtotal += itemSubtotals[i];
			}

		tax = (subtotal * massTax);
		total = (subtotal + tax);

		finalSubtotal.value = subtotal.toFixed(2);
		finalTax.value = tax.toFixed(2);
		finalTotal.value = total.toFixed(2);
	}






	// checks for name and telephone, if delivery checks street/city, and if 
	function validate() {
		
		document.getElementById("errphone").style.display = "none";
		document.getElementById("errlname").style.display = "none";
		document.getElementById("errcity").style.display = "none";
		document.getElementById("errstreet").style.display = "none";

		var lName = document.getElementsByName("lname")[0].value;

		var validorder = true;

		if (lName == "") {
			document.getElementById("errlname").style.display = "inline-block";
			alert("Please enter your last name and resubmit.");
			validorder = false;
		}

		if (validateNumber() == false) {
			document.getElementById("errphone").style.display = "inline-block";
			alert("Please enter a valid phone number without characters or spaces and resubmit.");
			validorder = false;
		}

		//conditionals will check if delivery info is filled in
		if (method == "delivery") {
			orderStreet = document.getElementsByName("street")[0], 
			orderCity = document.getElementsByName("city")[0];

			if (orderStreet.value == "") {
				document.getElementById("errstreet").style.display = "inline-block";
				alert("Please enter street address and resubmit.");
				validorder = false;
			}

			if (orderCity.value == "") {
				document.getElementById("errcity").style.display = "inline-block";
				alert("Please enter city and resubmit.");
				validorder = false;
			}
		}

		if (finalTotal.value <= 0) {
			alert("Tou need to order at least one thing");
			validorder = false;
		}

		return validorder;
	}

	// called on click of submit - calls validate, then calls order display
	function finish() {
		if (validate() == true) {
			displayOrder();
		}
		return;
	}


	function displayOrder() {
		var orderWindow = window.open("", "_blank", "width = 1000, height = 1000");
		orderWindow.document.write(statement());
	}

	// composes the statement printed when displaying order
	function statement() {
		getTime();
		var orderStatement = "Thank you for ordering from The Krusty Krab! Your food will be ready at: " + hour + ":" + min + ".<br><br>Your order is: <br>";
		for (let i = 0; i < quanItem.length; i++) {
			if (quanItem[i] != 0) {
				orderStatement += menuItems[i].name + ": " + quanItem[i] + "<br><br>";
			}
		}
		orderStatement += "Payment is expected upon both pickup and delivery. Here is the billing: <br>"
		orderStatement += "Subtotal: $" + subtotal.toFixed(2) + "</br>Tax: $" + tax.toFixed(2) + "<br>Total: $" + total.toFixed(2) + "<br><br>Enjoy!";
		return orderStatement;
	}


    </script>



<div id="footer">
	<div class="column left">
		<h4>
			Contact Us
		</h4>

		<div>
			<span>
				social media:
			</span>
			<span>
				<a href="https://www.facebook.com/TheKrustyKrabOfficial" target="blank"><img src="facebook-logo-png-2320.png" height="26px"></a>
			</span>
			<span>
				<a href="https://www.instagram.com/explore/tags/krustykrab/?hl=en" target="blank"><img src="instagram-logo-png-2428.png" height="26px"></a>
			</span>
			<span>
				<a href="https://twitter.com/krustykrabUSA" target="blank"><img src="twitter-logo-png-5860.png" height="26px"></a>
			</span>
		</div>

		<h5>
			email: <a href="mailto: sponge.bob@krustykrab.com">sponge.bob@krustykrab.com</a>
		</h5>

		<h5>
			address: 831 Bottom Feeder Lane, Bikini Bottom
		</h5>

		<h5>
			Hours: Mon-Fri: 9am to 8pm, Sat-Sun: 10am to 11pm
		</h5>
	</div>

	<div class="column middle">
		<h4>
			Sign up to our newsletter!
		</h4>

		<p style="text-align: center;">
			we will update you on upcoming events, new menu items, and deals!
		</p>

		<form>
			<input type="text" placeholder="email address" name="email" required>
			<input type="submit" value="subscribe" name="subscribe">
		</form>
	</div>

	<div class="column right">
		<h4>
			Navigate
		</h4>

		<div id="navLinks">
			<span class="navigate">
				<p><a href="index.html">Home</a></p>
				<p><a href="menu.html">Menu</a></p>
				<p><a href="team.html">The Team</a></p>
				<p><a href="location.html">Location</a></p>
			</span>
			<span class="navigate">
				<p><a href="events.html">Events</a></p>
				<p><a href="contact.html">Contact Us</a></p>
				<p><a href="faq.html">FAQ</a></p>
			</span>
		</div>

	</div>
</div>

</body>

</html>